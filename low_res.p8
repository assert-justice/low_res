pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
plr1 = nil
dbg={}
function _init()
	poke(0x5f2c,3)
	inp={}
	for i=0,5 do add(inp,0)end
	plr1 = {x=28,y=28,dir=1,spd=0.5,inp=inp,num=0}
end

function _draw()
	cls(1)
	for i,t in pairs(dbg) do print(t,0,i*8) end
	dbg={}
	plrdraw(plr1)
end

function _update60()
	input(plr1)
	plrmove(plr1)
end

function plrmove(plr)
	dir=-1
	spd = plr.spd
	if plr.inp[5]>0 then spd *= 0.6 end
	if plr.inp[0]>0 then plr.x-=spd dir=2 end
	if plr.inp[1]>0 then plr.x+=spd dir=0 end
	if plr.inp[2]>0 then plr.y-=spd dir=1 end
	if plr.inp[3]>0 then plr.y+=spd dir=3 end
	if plr.inp[4]==0 and dir!=-1 then plr.dir = dir end
end

function input(plr)
	for i=0,5 do
		if btn(i,plr.num) then
			plr.inp[i]+=1
		else
			plr.inp[i]=0
		end
	end
end

function plrdraw(plr)
	sp=7+2*plr.num+1-plr.dir%2
	spr(sp,plr.x,plr.y,1,1,plr.dir==2,plr.dir==3)
end

__gfx__
00000000000000000007000000750000075000007500000050000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005887000008850000088000000880000008800000788000000008800088000000000cc000cc0000000000000000000000000000000000000000000000
00700700788500005880000008800000088000000880000008870000008118008588880000c11c00c5cccc000000000000000000000000000000000000000000
0007700000000000700000005700000005700000005700000005000000811800a551118000c11c00a55111c00000000000000000000000000000000000000000
0007700000000000000000000000000000000000000000000000000000811800a551118000c11c00a55111c00000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000008558008588880000c55c00c5cccc000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000008555580880000000c5555c0cc0000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000088aa880000000000ccaacc0000000000000000000000000000000000000000000000000
